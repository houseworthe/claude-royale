# 2v2 Mode - Co-op with Ethan

**Purpose:** Play 2v2 battles alongside Ethan (project supervisor).

---

## How It Works

1. Ethan sends a 2v2 invite from his device
2. Claude sees notification: "ehouse is looking for a 2v2 battle"
3. Claude taps the 2v2 accept button AND spawns 3 player agents simultaneously
4. Play the match normally
5. After match ends, return to main menu

---

## Spawn Protocol (2v2)

**CRITICAL: Read SPAWN_INSTRUCTIONS_HAIKU.md before spawning agents!**

**When user says "2v2 mode":**

1. Take a screenshot
2. If you DON'T see "ehouse is looking for a 2v2 battle" notification:
   - Wait 5 seconds (`sleep 5`)
   - Screenshot again
   - Repeat until you see the notification
3. Once you see the notification, proceed with spawn protocol below

**When you see "ehouse is looking for a 2v2 battle" notification:**

1. Read `SPAWN_INSTRUCTIONS_HAIKU.md`
2. In a SINGLE MESSAGE, spawn everything in parallel:

```
MESSAGE 1 - ALL IN PARALLEL:
  Bash (background): ./scripts/tap.sh 2v2_accept
  Task (background): Player Agent 1 - SPAWN_INSTRUCTIONS_HAIKU.md content (replace {AGENT_NUM} with 1) + 2V2 RULES section below
  Task (background): Player Agent 2 - SPAWN_INSTRUCTIONS_HAIKU.md content (replace {AGENT_NUM} with 2) + 2V2 RULES section below
  Task (background): Player Agent 3 - SPAWN_INSTRUCTIONS_HAIKU.md content (replace {AGENT_NUM} with 3) + 2V2 RULES section below

THEN:
  Wait 60 seconds
  Poll agents with AgentOutputTool
  Repeat every 60 seconds until agents complete
```

---

## 2V2 RULES (Append to Agent Instructions)

**Add this section to the END of each agent's spawn instructions:**

```markdown
## 2V2 MODE - ADDITIONAL RULES

You are playing 2v2 with a TEAMMATE (Ethan).

### CRITICAL: PLAY FURTHER BACK

**Problem:** If you always play at the bridge (row E), all troops cluster in opponent's half and the game gets cramped.

**Solution:** Check the board state before placing:

- **If lots of troops visible near opponent's bridge/middle** → Play FURTHER BACK (rows F, G, or H)
- **If board is clear or troops are spread out** → Bridge plays (row E) are OK

**Default 2v2 placements (more defensive):**
- Giant: `3G` or `6G` (behind princess tower, not at bridge)
- Musketeer: `3H` or `6H` (deep, gives time to shoot)
- Defensive troops: `3F`/`6F` or deeper

**Only play at bridge (row E) when:**
- Board is mostly clear
- You're making a counter-push after successful defense
- Double elixir and going all-in

### WHY THIS MATTERS

Playing further back:
- Spreads the battlefield out
- Gives your troops time to build up
- Prevents everything from clumping at opponent's bridge
- Works better with teammate's plays

### NO TROPHY CHANGE

2v2 doesn't affect trophies. Play to win but don't stress about losses.
```

---

## 2v2 Differences from 1v1

- **Play further back:** Default to rows F-G-H, not row E
- **Spread the battlefield:** Don't let everything cluster at the bridge
- **No trophy change:** 2v2 doesn't affect trophy count
- **Teammate:** Ethan plays alongside you
- **Result screen:** Same as 1v1, use `result_ok` to dismiss

---

## Commander Loop (2v2 Mode)

1. Screenshot - look for "ehouse is looking for a 2v2 battle"
2. Read SPAWN_INSTRUCTIONS_HAIKU.md
3. In ONE message: tap 2v2_accept + spawn 3 agents with 2v2 rules appended (all parallel)
4. Poll agents until match ends
5. Dismiss result screen with `result_ok`
6. Wait for next instruction from Ethan
